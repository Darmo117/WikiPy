(function(){window.__confirmExitCounter=0;$.fn.confirmExit=function(){this._confirmExit=false;this._savedState=this.serialize();let disable=()=>{if(this._confirmExit){this._confirmExit=false;__confirmExitCounter--;if(__confirmExitCounter===0){window.onbeforeunload=null;}}};$("input, textarea, select",this).on("change keyup",()=>{if(this.serialize()!==this._savedState){if(!this._confirmExit){this._confirmExit=true;__confirmExitCounter++;window.onbeforeunload=function(e){if(e){e.returnValue=true;}
return true;}}}else if(this._confirmExit){disable();}});this.submit(disable);return this;}})();